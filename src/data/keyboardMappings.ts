/**
 * Remington GAIL Keyboard Mapping
 * Based on official Keyman layout with corrections from user-provided images
 *
 * This mapping includes all 4 modifier states:
 * - Normal (no modifiers)
 * - Shift (Shift key held)
 * - AltGr (Right Alt held)
 * - AltGr+Shift (Right Alt + Shift held)
 *
 * IMPORTANT: This is the FOUNDATION of the typing platform.
 * All mappings must be 100% accurate and verified.
 */

import { KeyboardLayout, KeyMapping } from '@/types/keyboard.types';

/**
 * Complete Remington GAIL keyboard layout
 * Organized by rows: Number row, Top row (QWERTY), Home row (ASDF), Bottom row (ZXCV), Space bar
 */
export const REMINGTON_GAIL_LAYOUT: KeyboardLayout = {
  name: 'Remington GAIL',
  description: 'Remington-GAIL typewriter layout for Unicode Devanagari input',

  modifiers: {
    shift: ['ShiftLeft', 'ShiftRight'],
    altgr: ['AltRight'],
  },

  rows: [
    // ========== NUMBER ROW ==========
    [
      {
        key: 'Backquote',
        normal: 'ॊ',
        shift: 'घ',
        altgr: '',
        altgrShift: '',
        finger: 0,
        hand: 'left',
        label: '`',
      },
      {
        key: 'Digit1',
        normal: '१',
        shift: '!',
        altgr: '१',
        altgrShift: 'ड',
        finger: 0,
        hand: 'left',
        label: '1',
      },
      {
        key: 'Digit2',
        normal: '२',
        shift: '/',
        altgr: '२',
        altgrShift: 'घ',
        finger: 1,
        hand: 'left',
        label: '2',
      },
      {
        key: 'Digit3',
        normal: '३',
        shift: '॰',
        altgr: '३',
        altgrShift: 'ह',
        finger: 2,
        hand: 'left',
        label: '3',
      },
      {
        key: 'Digit4',
        normal: '४',
        shift: '*',
        altgr: '४',
        altgrShift: 'ह्य',
        finger: 3,
        hand: 'left',
        label: '4',
      },
      {
        key: 'Digit5',
        normal: '५',
        shift: '',
        altgr: '५',
        altgrShift: '%',
        finger: 3,
        hand: 'left',
        label: '5',
      },
      {
        key: 'Digit6',
        normal: '६',
        shift: '-',
        altgr: '६',
        altgrShift: 'ह',
        finger: 4,
        hand: 'right',
        label: '6',
      },
      {
        key: 'Digit7',
        normal: '७',
        shift: "'",
        altgr: '७',
        altgrShift: '÷',
        finger: 4,
        hand: 'right',
        label: '7',
      },
      {
        key: 'Digit8',
        normal: '८',
        shift: ',',
        altgr: '८',
        altgrShift: '×',
        finger: 5,
        hand: 'right',
        label: '8',
      },
      {
        key: 'Digit9',
        normal: '९',
        shift: 'ड्ड',
        altgr: '९',
        altgrShift: 'दं',
        finger: 6,
        hand: 'right',
        label: '9',
      },
      {
        key: 'Digit0',
        normal: '०',
        shift: 'त्र',
        altgr: '०',
        altgrShift: '!',
        finger: 7,
        hand: 'right',
        label: '0',
      },
      {
        key: 'Minus',
        normal: 'ः',
        shift: '़',
        altgr: 'ज',
        altgrShift: 'ज',
        finger: 7,
        hand: 'right',
        label: '-',
      },
      {
        key: 'Equal',
        normal: 'ृ',
        shift: 'त्रं',
        altgr: '+',
        altgrShift: '=',
        finger: 7,
        hand: 'right',
        label: '=',
      },
      {
        key: 'Backspace',
        normal: '',
        shift: '',
        altgr: '',
        altgrShift: '',
        finger: 7,
        hand: 'right',
        label: 'Backspace',
      },
    ],

    // ========== TOP ROW (QWERTY) ==========
    [
      {
        key: 'Tab',
        normal: '',
        shift: '',
        altgr: '',
        altgrShift: '',
        finger: 0,
        hand: 'left',
        label: 'Tab',
      },
      {
        key: 'KeyQ',
        normal: 'ॏ',
        shift: 'फ',
        altgr: 'फ',
        altgrShift: 'ञ',
        finger: 0,
        hand: 'left',
        label: 'Q',
      },
      {
        key: 'KeyW',
        normal: 'ॎ',
        shift: 'ॏ',
        altgr: 'ॎ',
        altgrShift: 'त्रृ',
        finger: 1,
        hand: 'left',
        label: 'W',
      },
      {
        key: 'KeyE',
        normal: 'म',
        shift: 'म',
        altgr: '॰',
        altgrShift: '॰',
        finger: 2,
        hand: 'left',
        label: 'E',
      },
      {
        key: 'KeyR',
        normal: 'त',
        shift: 'ि',
        altgr: 'त',
        altgrShift: 'त',
        finger: 3,
        hand: 'left',
        label: 'R',
      },
      {
        key: 'KeyT',
        normal: 'ज',
        shift: 'ज',
        altgr: 'ज',
        altgrShift: 'ज़',
        finger: 3,
        hand: 'left',
        label: 'T',
      },
      {
        key: 'KeyY',
        normal: 'ल',
        shift: 'ल',
        altgr: 'द्द',
        altgrShift: 'द्भ',
        finger: 4,
        hand: 'right',
        label: 'Y',
      },
      {
        key: 'KeyU',
        normal: 'न',
        shift: 'न',
        altgr: 'फ',
        altgrShift: 'ज़',
        finger: 4,
        hand: 'right',
        label: 'U',
      },
      {
        key: 'KeyI',
        normal: 'प',
        shift: 'प',
        altgr: 'फ',
        altgrShift: 'प',
        finger: 5,
        hand: 'right',
        label: 'I',
      },
      {
        key: 'KeyO',
        normal: 'व',
        shift: 'व',
        altgr: 'ठन',
        altgrShift: 'व़',
        finger: 6,
        hand: 'right',
        label: 'O',
      },
      {
        key: 'KeyP',
        normal: 'च',
        shift: 'च',
        altgr: 'श',
        altgrShift: 'ढ',
        finger: 7,
        hand: 'right',
        label: 'P',
      },
      {
        key: 'BracketLeft',
        normal: 'ख',
        shift: 'ध',
        altgr: 'ख',
        altgrShift: 'ढ्ढ',
        finger: 7,
        hand: 'right',
        label: '[',
      },
      {
        key: 'BracketRight',
        normal: '़',
        shift: 'द्ध',
        altgr: 'द्ध',
        altgrShift: 'द्ध',
        finger: 7,
        hand: 'right',
        label: ']',
      },
      {
        key: 'Backslash',
        normal: '',
        shift: 'उ',
        altgr: 'उ',
        altgrShift: 'उं',
        finger: 7,
        hand: 'right',
        label: '\\',
      },
      // { key: 'Enter', normal: '', shift: '', altgr: '', altgrShift: '', finger: 7, hand: 'right', label: 'Enter' },
    ],

    // ========== HOME ROW (ASDFGHJKL) ==========
    [
      {
        key: 'CapsLock',
        normal: '',
        shift: '',
        altgr: '',
        altgrShift: '',
        finger: 0,
        hand: 'left',
        label: 'Caps',
      },
      {
        key: 'KeyA',
        normal: 'ॅ',
        shift: 'ठ',
        altgr: 'हण',
        altgrShift: 'ख',
        finger: 0,
        hand: 'left',
        label: 'A',
      },
      {
        key: 'KeyS',
        normal: 'ॊ',
        shift: 'ॊ',
        altgr: 'भ',
        altgrShift: 'ध',
        finger: 1,
        hand: 'left',
        label: 'S',
      },
      {
        key: 'KeyD',
        normal: 'क',
        shift: 'क',
        altgr: 'ध',
        altgrShift: 'हु',
        finger: 2,
        hand: 'left',
        label: 'D',
      },
      {
        key: 'KeyF',
        normal: 'ि',
        shift: 'थ',
        altgr: 'य',
        altgrShift: 'थ',
        finger: 3,
        hand: 'left',
        label: 'F',
      },
      {
        key: 'KeyG',
        normal: 'ह',
        shift: 'ळ',
        altgr: 'घ',
        altgrShift: 'ग्र',
        finger: 3,
        hand: 'left',
        label: 'G',
      },
      {
        key: 'KeyH',
        normal: 'ी',
        shift: 'भ',
        altgr: 'ी',
        altgrShift: 'ञच',
        finger: 4,
        hand: 'right',
        label: 'H',
      },
      {
        key: 'KeyJ',
        normal: 'र',
        shift: 'श्र',
        altgr: 'ज',
        altgrShift: 'श',
        finger: 4,
        hand: 'right',
        label: 'J',
      },
      {
        key: 'KeyK',
        normal: 'ा',
        shift: 'ज्ञ',
        altgr: 'य',
        altgrShift: 'ज्ञ',
        finger: 5,
        hand: 'right',
        label: 'K',
      },
      {
        key: 'KeyL',
        normal: 'स',
        shift: 'स',
        altgr: 'स्त्र',
        altgrShift: 'ज',
        finger: 6,
        hand: 'right',
        label: 'L',
      },
      {
        key: 'Semicolon',
        normal: 'य',
        shift: 'रु',
        altgr: '।',
        altgrShift: 'स',
        finger: 7,
        hand: 'right',
        label: ';',
      },
      {
        key: 'Quote',
        normal: 'श',
        shift: 'ष',
        altgr: 'श',
        altgrShift: 'ष',
        finger: 7,
        hand: 'right',
        label: "'",
      },
      {
        key: 'Enter',
        normal: '',
        shift: '',
        altgr: '',
        altgrShift: '',
        finger: 7,
        hand: 'right',
        label: 'Enter',
      },
    ],

    // ========== BOTTOM ROW (ZXCVBNM) ==========
    [
      {
        key: 'ShiftLeft',
        normal: '',
        shift: '',
        altgr: '',
        altgrShift: '',
        finger: 0,
        hand: 'left',
        label: 'Shift',
      },
      {
        key: 'KeyZ',
        normal: 'ॉ',
        shift: 'र',
        altgr: 'ॉ',
        altgrShift: 'ॉ',
        finger: 0,
        hand: 'left',
        label: 'Z',
      },
      {
        key: 'KeyX',
        normal: 'ग',
        shift: 'ग',
        altgr: 'द्र',
        altgrShift: 'ग',
        finger: 1,
        hand: 'left',
        label: 'X',
      },
      {
        key: 'KeyC',
        normal: 'ब',
        shift: 'ब',
        altgr: 'ड',
        altgrShift: 'ज',
        finger: 2,
        hand: 'left',
        label: 'C',
      },
      {
        key: 'KeyV',
        normal: 'अ',
        shift: 'ट',
        altgr: 'ट',
        altgrShift: 'द',
        finger: 3,
        hand: 'left',
        label: 'V',
      },
      {
        key: 'KeyB',
        normal: 'ठ',
        shift: 'ठ',
        altgr: 'ई',
        altgrShift: 'ई',
        finger: 3,
        hand: 'left',
        label: 'B',
      },
      {
        key: 'KeyN',
        normal: 'द',
        shift: 'छ',
        altgr: 'ण',
        altgrShift: 'छ',
        finger: 4,
        hand: 'right',
        label: 'N',
      },
      {
        key: 'KeyM',
        normal: 'उ',
        shift: 'ड',
        altgr: 'अं',
        altgrShift: 'ड',
        finger: 4,
        hand: 'right',
        label: 'M',
      },
      {
        key: 'Comma',
        normal: 'ए',
        shift: 'ह',
        altgr: '॰',
        altgrShift: 'ढढ',
        finger: 5,
        hand: 'right',
        label: ',',
      },
      {
        key: 'Period',
        normal: 'ण',
        shift: 'झ',
        altgr: '।',
        altgrShift: 'झ',
        finger: 6,
        hand: 'right',
        label: '.',
      },
      {
        key: 'Slash',
        normal: 'ध',
        shift: 'घ',
        altgr: '/',
        altgrShift: '?',
        finger: 7,
        hand: 'right',
        label: '/',
      },
      {
        key: 'ShiftRight',
        normal: '',
        shift: '',
        altgr: '',
        altgrShift: '',
        finger: 7,
        hand: 'right',
        label: 'Shift',
      },
    ],

    // ========== SPACE BAR ==========
    [
      {
        key: 'ControlLeft',
        normal: '',
        shift: '',
        altgr: '',
        altgrShift: '',
        finger: 0,
        hand: 'left',
        label: 'Ctrl',
      },
      {
        key: 'AltLeft',
        normal: '',
        shift: '',
        altgr: '',
        altgrShift: '',
        finger: 0,
        hand: 'left',
        label: 'Alt',
      },
      {
        key: 'Space',
        normal: ' ',
        shift: ' ',
        altgr: ' ',
        altgrShift: ' ',
        finger: 4,
        hand: 'left',
        label: 'Space',
      },
      {
        key: 'AltRight',
        normal: '',
        shift: '',
        altgr: '',
        altgrShift: '',
        finger: 7,
        hand: 'right',
        label: 'Alt',
      },
      {
        key: 'ControlRight',
        normal: '',
        shift: '',
        altgr: '',
        altgrShift: '',
        finger: 7,
        hand: 'right',
        label: 'Ctrl',
      },
    ],
  ],
};

/**
 * Flattened map of all keys for quick lookup
 * Key: physical key code, Value: KeyMapping
 */
export const KEY_MAP: Map<string, KeyMapping> = new Map(
  REMINGTON_GAIL_LAYOUT.rows.flat().map((key) => [key.key, key])
);

/**
 * Common Hindi characters for reference and validation
 */
export const HINDI_CHARACTERS = {
  // Vowels (स्वर)
  vowels: ['अ', 'आ', 'इ', 'ई', 'उ', 'ऊ', 'ऋ', 'ए', 'ऐ', 'ओ', 'औ'],

  // Vowel signs (मात्राएँ)
  matras: [
    'ा',
    'ि',
    'ी',
    'ु',
    'ू',
    'ृ',
    'े',
    'ै',
    'ो',
    'ौ',
    'ं',
    'ः',
    '़',
    'ँ',
  ],

  // Consonants - Ka varga (क वर्ग)
  kaVarga: ['क', 'ख', 'ग', 'घ', 'ङ'],

  // Consonants - Cha varga (च वर्ग)
  chaVarga: ['च', 'छ', 'ज', 'झ', 'ञ'],

  // Consonants - Ta varga (ट वर्ग)
  taVarga: ['ट', 'ठ', 'ड', 'ढ', 'ण'],

  // Consonants - Ta varga (त वर्ग)
  softTaVarga: ['त', 'थ', 'द', 'ध', 'न'],

  // Consonants - Pa varga (प वर्ग)
  paVarga: ['प', 'फ', 'ब', 'भ', 'म'],

  // Other consonants
  others: ['य', 'र', 'ल', 'व', 'श', 'ष', 'स', 'ह', 'ळ'],

  // Special characters
  special: ['।', '॰', 'ॅ', 'ॉ', 'ॊ', 'ॏ', 'ॎ'],

  // Devanagari numbers
  numbers: ['०', '१', '२', '३', '४', '५', '६', '७', '८', '९'],

  // Conjuncts and special combinations
  conjuncts: [
    'क्ष',
    'त्र',
    'ज्ञ',
    'श्र',
    'द्ध',
    'द्द',
    'द्भ',
    'द्र',
    'ड्ड',
    'ढ्ढ',
    'त्रं',
    'त्रृ',
  ],
};
